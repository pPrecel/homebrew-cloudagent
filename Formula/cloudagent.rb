# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Cloudagent < Formula
  desc "The simple and easy-to-use program designed to watch user activity for Cloud Providers."
  homepage "http://github.com/pPrecel/cloudagent"
  version "0.6.0"
  license "MIT"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/pPrecel/cloudagent/releases/download/v0.6.0/cloudagent_0.6.0_darwin_x86_64.tar.gz"
      sha256 "e047890f8154a49d45848226f0a704f0a5701a12fa4e9106d56be3d0ff6000dd"

      def install
        bin.install "cloudagent"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/pPrecel/cloudagent/releases/download/v0.6.0/cloudagent_0.6.0_darwin_arm64.tar.gz"
      sha256 "b84aaca83cdb27b411d42fce4533eed922afb64c9e77a3ea8adb4d5b4aa2b3b3"

      def install
        bin.install "cloudagent"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      url "https://github.com/pPrecel/cloudagent/releases/download/v0.6.0/cloudagent_0.6.0_linux_x86_64.tar.gz"
      sha256 "2206bdbea0198b49e2c153a178eac75a9a9087ddac53a9b3d960273792226f74"

      def install
        bin.install "cloudagent"
      end
    end
    if Hardware::CPU.arm? && !Hardware::CPU.is_64_bit?
      url "https://github.com/pPrecel/cloudagent/releases/download/v0.6.0/cloudagent_0.6.0_linux_armv7.tar.gz"
      sha256 "a5225ec2ad2a9e428ed57c03df5a8e2abbfa4f24239c3a7a73dce4fa4d4e8d48"

      def install
        bin.install "cloudagent"
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/pPrecel/cloudagent/releases/download/v0.6.0/cloudagent_0.6.0_linux_arm64.tar.gz"
      sha256 "e23554c1ed6aa1d36414fa5b8e6a2e677a83833a96ae1c057328c42d032cb1f4"

      def install
        bin.install "cloudagent"
      end
    end
  end

  service do
    run ["#{opt_bin}/cloudagent", "serve"]
    log_path "/tmp/cloudagent/cloudagent.stdout"
    environment_variables PATH: "/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/homebrew/bin:#{Dir.home}/.rd/bin:#{Dir.home}/.krew/bin:"
    keep_alive true
  end

  test do
    system "#{bin}/cloudagent"
  end
end
