# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Cloudagent < Formula
  desc "The simple and easy-to-use program designed to watch user activity for Cloud Providers."
  homepage "http://github.com/pPrecel/cloudagent"
  version "0.7.0"
  license "MIT"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/pPrecel/cloudagent/releases/download/v0.7.0/cloudagent_0.7.0_darwin_x86_64.tar.gz"
      sha256 "4246dbbe2d9ed3b3d1da65863fc2647e9971a57e2c20b9782fa4de9b0a5f5561"

      def install
        bin.install "cloudagent"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/pPrecel/cloudagent/releases/download/v0.7.0/cloudagent_0.7.0_darwin_arm64.tar.gz"
      sha256 "ae793ad0bb0abae7bad6d2bf3457aa94fd4de6e1067ca2bbe0e9d79511d4b09d"

      def install
        bin.install "cloudagent"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      url "https://github.com/pPrecel/cloudagent/releases/download/v0.7.0/cloudagent_0.7.0_linux_x86_64.tar.gz"
      sha256 "af3fb1cb190d3a139c4eb6e5f2d5a6c354bc3333f6d2762633fb06a2e89cc953"

      def install
        bin.install "cloudagent"
      end
    end
    if Hardware::CPU.arm? && !Hardware::CPU.is_64_bit?
      url "https://github.com/pPrecel/cloudagent/releases/download/v0.7.0/cloudagent_0.7.0_linux_armv7.tar.gz"
      sha256 "d5a066ec8d5597f0eec1b04e9d80c551f9ef9c66e0c256adea0e3367b7a667be"

      def install
        bin.install "cloudagent"
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/pPrecel/cloudagent/releases/download/v0.7.0/cloudagent_0.7.0_linux_arm64.tar.gz"
      sha256 "890e9f6e6abda584340ac770fc19aaf09a21df3e9535b18cdc5cb57b35e92d98"

      def install
        bin.install "cloudagent"
      end
    end
  end

  service do
    run ["#{opt_bin}/cloudagent", "serve"]
    log_path "/tmp/cloudagent/cloudagent.stdout"
    environment_variables PATH: "/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/homebrew/bin:#{Dir.home}/.rd/bin:#{Dir.home}/.krew/bin:"
    keep_alive true
  end

  test do
    system "#{bin}/cloudagent"
  end
end
